import{g as e,n as a,s as t,p as s,c as l,w as o,f as i,i as n,o as r,a as c,b as d,r as m,F as f,x as u,e as p,t as v,q as h,j as _,h as g,u as b,I as k,y as D,v as C}from"./index-CUhQkSZ9.js";import{C as E}from"./CustomNavBar.avKexq7I.js";import{B as F}from"./booking.service.BhFRx7ZA.js";import{_ as B}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./storage.service.Bt6PQ2bo.js";const T=B({components:{CustomNavBar:E},data:()=>({navPaddingTop:100,events:[{id:"event-001",title:"å£®ä¹¡å±±æ­ŒæŒ‘æˆ˜èµ›Â·æ˜¥å­£ç¯‡",description:"ä½“éªŒå£®æ—ä¼ ç»Ÿå±±æ­Œæ–‡åŒ–ï¼Œä¸Žæ­ŒçŽ‹æ­ŒåŽåŒå°ç«žæŠ€",date:"2026-02-15",time:"14:00",location:"å—å®å¸‚æ°‘æ—æ–‡åŒ–ä¸­å¿ƒ",address:"å—å®å¸‚é’ç§€åŒºæ°‘æ—å¤§é“123å·",totalSlots:50,availableSlots:12,requirements:"çƒ­çˆ±å±±æ­Œæ–‡åŒ–ï¼Œå¹´æ»¡18å‘¨å²",coverImage:"/static/pexels-pripicart-620337.jpg"},{id:"event-002",title:"å±±æ­Œä¼ æ‰¿å·¥ä½œåŠ",description:"è·Ÿéšéžé—ä¼ æ‰¿äººå­¦ä¹ æ­£å®—å£®æ—å±±æ­Œ",date:"2026-02-20",time:"09:30",location:"æ­¦é¸£åŒºæ–‡åŒ–é¦†",address:"å—å®å¸‚æ­¦é¸£åŒºåŸŽåŽ¢é•‡æ–‡åŒ–è·¯88å·",totalSlots:30,availableSlots:0,requirements:"å¯¹å±±æ­Œæœ‰æµ“åŽšå…´è¶£",coverImage:"/static/logo.png"},{id:"event-003",title:"ä¸‰æœˆä¸‰å±±æ­ŒèŠ‚é¢„çƒ­æ´»åŠ¨",description:"æå‰æ„Ÿå—ä¸‰æœˆä¸‰å±±æ­ŒèŠ‚çš„çƒ­çƒˆæ°›å›´",date:"2026-03-01",time:"10:00",location:"é’ç§€å±±é£Žæ™¯åŒº",address:"å—å®å¸‚é’ç§€åŒºé’å±±è·¯19å·",totalSlots:100,availableSlots:45,requirements:"æ— ç‰¹æ®Šè¦æ±‚",coverImage:"/static/logo.png"},{id:"event-004",title:"äº²å­å±±æ­Œä½“éªŒè¥",description:"å¸¦å­©å­ä¸€èµ·æ„Ÿå—å£®ä¹¡å±±æ­Œé­…åŠ›",date:"2026-03-08",time:"15:00",location:"å¹¿è¥¿æ°‘æ—åšç‰©é¦†",address:"å—å®å¸‚é’ç§€åŒºé’çŽ¯è·¯11å·",totalSlots:40,availableSlots:8,requirements:"éœ€å®¶é•¿é™ªåŒï¼Œå„¿ç«¥å¹´é¾„6-14å²",coverImage:"/static/logo.png"}],selectedEvent:null,showBookingForm:!1,showConfirmation:!1,confirmationData:{eventTitle:"",eventDate:"",eventTime:"",eventLocation:"",name:"",phone:"",participants:1},formData:{name:"",phone:"",participants:1,remark:""},formErrors:{}}),onLoad(){const a=e();this.navPaddingTop=(a.statusBarHeight||20)+75},methods:{goToRecords(){a({url:"/pages/sound-healing/booking-records"})},openBookingForm(e){this.selectedEvent=e,this.showBookingForm=!0,this.resetForm()},closeBookingForm(){this.showBookingForm=!1,this.selectedEvent=null,this.resetForm()},resetForm(){this.formData={name:"",phone:"",participants:1,remark:""},this.formErrors={}},validateForm(){const e={};return this.formData.name&&this.formData.name.trim()||(e.name="è¯·è¾“å…¥å§“å"),this.formData.phone&&this.formData.phone.trim()?/^1[3-9]\d{9}$/.test(this.formData.phone)||(e.phone="è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·ç "):e.phone="è¯·è¾“å…¥æ‰‹æœºå·",this.formErrors=e,0===Object.keys(e).length},closeConfirmation(){this.showConfirmation=!1,this.confirmationData={eventTitle:"",eventDate:"",eventTime:"",eventLocation:"",name:"",phone:"",participants:1}},goToRecordsFromConfirm(){this.closeConfirmation(),this.goToRecords()},async submitBooking(){if(!this.validateForm())return;if(!this.selectedEvent)return void t({title:"è¯·é€‰æ‹©æ´»åŠ¨",icon:"none"});const e=await F.createBooking(this.selectedEvent.id,this.selectedEvent,this.formData);if(e.success){const e=this.events.findIndex((e=>e.id===this.selectedEvent.id));-1!==e&&(this.events[e].availableSlots-=this.formData.participants||1),this.confirmationData={eventTitle:this.selectedEvent.title,eventDate:this.selectedEvent.date,eventTime:this.selectedEvent.time,eventLocation:this.selectedEvent.location,name:this.formData.name,phone:this.formData.phone,participants:this.formData.participants||1},this.showBookingForm=!1,this.showConfirmation=!0,this.selectedEvent=null,this.resetForm()}else t({title:e.message||"é¢„çº¦å¤±è´¥",icon:"none"})}}},[["render",function(e,a,t,E,F,B){const T=s("custom-nav-bar"),S=C,x=g,y=n,w=b,V=k,j=D;return r(),l(y,{class:"offline-booking-container",style:i({paddingTop:F.navPaddingTop+"px"})},{default:o((()=>[c(T,{title:"çº¿ä¸‹å±±æ­ŒæŒ‘æˆ˜é¢„çº¦",gradient:"linear-gradient(120deg, #1b5e20 0%, #2e7d32 45%, #43a047 100%)"}),c(y,{class:"event-list"},{default:o((()=>[(r(!0),d(f,null,m(F.events,(e=>(r(),l(y,{key:e.id,class:"event-card"},{default:o((()=>[c(S,{src:e.coverImage,class:"event-cover",mode:"aspectFill"},null,8,["src"]),c(y,{class:"event-content"},{default:o((()=>[c(x,{class:"event-title"},{default:o((()=>[p(v(e.title),1)])),_:2},1024),c(y,{class:"event-info"},{default:o((()=>[c(y,{class:"info-item"},{default:o((()=>[c(x,{class:"info-icon"},{default:o((()=>[p("ðŸ“…")])),_:1}),c(x,{class:"info-text"},{default:o((()=>[p(v(e.date)+" "+v(e.time),1)])),_:2},1024)])),_:2},1024),c(y,{class:"info-item"},{default:o((()=>[c(x,{class:"info-icon"},{default:o((()=>[p("ðŸ“")])),_:1}),c(x,{class:"info-text"},{default:o((()=>[p(v(e.location),1)])),_:2},1024)])),_:2},1024),c(y,{class:"info-item"},{default:o((()=>[c(x,{class:"info-icon"},{default:o((()=>[p("ðŸ‘¥")])),_:1}),c(x,{class:_(["info-text",{"sold-out":0===e.availableSlots}])},{default:o((()=>[p(v(0===e.availableSlots?"å·²æ»¡":`å‰©ä½™ ${e.availableSlots} ä¸ªåé¢`),1)])),_:2},1032,["class"])])),_:2},1024)])),_:2},1024),c(w,{class:_(["book-btn",{disabled:0===e.availableSlots}]),disabled:0===e.availableSlots,onClick:a=>B.openBookingForm(e)},{default:o((()=>[p(v(0===e.availableSlots?"å·²æ»¡":"ç«‹å³é¢„çº¦"),1)])),_:2},1032,["class","disabled","onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1}),F.showBookingForm?(r(),l(y,{key:0,class:"booking-modal",onClick:u(B.closeBookingForm,["self"])},{default:o((()=>[c(y,{class:"modal-content"},{default:o((()=>[c(y,{class:"modal-header"},{default:o((()=>[c(x,{class:"modal-title"},{default:o((()=>[p("é¢„çº¦ä¿¡æ¯")])),_:1}),c(x,{class:"close-btn",onClick:B.closeBookingForm},{default:o((()=>[p("Ã—")])),_:1},8,["onClick"])])),_:1}),F.selectedEvent?(r(),l(y,{key:0,class:"selected-event-info"},{default:o((()=>[c(x,{class:"event-name"},{default:o((()=>[p(v(F.selectedEvent.title),1)])),_:1}),c(x,{class:"event-datetime"},{default:o((()=>[p(v(F.selectedEvent.date)+" "+v(F.selectedEvent.time),1)])),_:1}),c(x,{class:"event-place"},{default:o((()=>[p(v(F.selectedEvent.location),1)])),_:1})])),_:1})):h("",!0),c(y,{class:"form-group"},{default:o((()=>[c(x,{class:"form-label"},{default:o((()=>[p("å§“å "),c(x,{class:"required"},{default:o((()=>[p("*")])),_:1})])),_:1}),c(V,{class:_(["form-input",{error:F.formErrors.name}]),modelValue:F.formData.name,"onUpdate:modelValue":a[0]||(a[0]=e=>F.formData.name=e),placeholder:"è¯·è¾“å…¥æ‚¨çš„å§“å"},null,8,["class","modelValue"]),F.formErrors.name?(r(),l(x,{key:0,class:"error-text"},{default:o((()=>[p(v(F.formErrors.name),1)])),_:1})):h("",!0)])),_:1}),c(y,{class:"form-group"},{default:o((()=>[c(x,{class:"form-label"},{default:o((()=>[p("æ‰‹æœºå· "),c(x,{class:"required"},{default:o((()=>[p("*")])),_:1})])),_:1}),c(V,{class:_(["form-input",{error:F.formErrors.phone}]),modelValue:F.formData.phone,"onUpdate:modelValue":a[1]||(a[1]=e=>F.formData.phone=e),type:"number",placeholder:"è¯·è¾“å…¥æ‚¨çš„æ‰‹æœºå·"},null,8,["class","modelValue"]),F.formErrors.phone?(r(),l(x,{key:0,class:"error-text"},{default:o((()=>[p(v(F.formErrors.phone),1)])),_:1})):h("",!0)])),_:1}),c(y,{class:"form-group"},{default:o((()=>[c(x,{class:"form-label"},{default:o((()=>[p("å‚ä¸Žäººæ•°")])),_:1}),c(V,{class:"form-input",modelValue:F.formData.participants,"onUpdate:modelValue":a[2]||(a[2]=e=>F.formData.participants=e),type:"number",placeholder:"é»˜è®¤1äºº"},null,8,["modelValue"])])),_:1}),c(y,{class:"form-group"},{default:o((()=>[c(x,{class:"form-label"},{default:o((()=>[p("å¤‡æ³¨")])),_:1}),c(j,{class:"form-textarea",modelValue:F.formData.remark,"onUpdate:modelValue":a[3]||(a[3]=e=>F.formData.remark=e),placeholder:"å¦‚æœ‰ç‰¹æ®Šéœ€æ±‚è¯·å¤‡æ³¨"},null,8,["modelValue"])])),_:1}),c(w,{class:"submit-btn",onClick:B.submitBooking},{default:o((()=>[p("ç¡®è®¤é¢„çº¦")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["onClick"])):h("",!0),F.showConfirmation?(r(),l(y,{key:1,class:"booking-modal",onClick:u(B.closeConfirmation,["self"])},{default:o((()=>[c(y,{class:"modal-content confirmation-modal"},{default:o((()=>[c(y,{class:"success-icon"},{default:o((()=>[p("âœ“")])),_:1}),c(x,{class:"success-title"},{default:o((()=>[p("é¢„çº¦æˆåŠŸ")])),_:1}),c(y,{class:"confirmation-details"},{default:o((()=>[c(y,{class:"detail-item"},{default:o((()=>[c(x,{class:"detail-label"},{default:o((()=>[p("æ´»åŠ¨åç§°")])),_:1}),c(x,{class:"detail-value"},{default:o((()=>[p(v(F.confirmationData.eventTitle),1)])),_:1})])),_:1}),c(y,{class:"detail-item"},{default:o((()=>[c(x,{class:"detail-label"},{default:o((()=>[p("æ´»åŠ¨æ—¶é—´")])),_:1}),c(x,{class:"detail-value"},{default:o((()=>[p(v(F.confirmationData.eventDate)+" "+v(F.confirmationData.eventTime),1)])),_:1})])),_:1}),c(y,{class:"detail-item"},{default:o((()=>[c(x,{class:"detail-label"},{default:o((()=>[p("æ´»åŠ¨åœ°ç‚¹")])),_:1}),c(x,{class:"detail-value"},{default:o((()=>[p(v(F.confirmationData.eventLocation),1)])),_:1})])),_:1}),c(y,{class:"detail-item"},{default:o((()=>[c(x,{class:"detail-label"},{default:o((()=>[p("é¢„çº¦äºº")])),_:1}),c(x,{class:"detail-value"},{default:o((()=>[p(v(F.confirmationData.name),1)])),_:1})])),_:1}),c(y,{class:"detail-item"},{default:o((()=>[c(x,{class:"detail-label"},{default:o((()=>[p("è”ç³»ç”µè¯")])),_:1}),c(x,{class:"detail-value"},{default:o((()=>[p(v(F.confirmationData.phone),1)])),_:1})])),_:1}),c(y,{class:"detail-item"},{default:o((()=>[c(x,{class:"detail-label"},{default:o((()=>[p("å‚ä¸Žäººæ•°")])),_:1}),c(x,{class:"detail-value"},{default:o((()=>[p(v(F.confirmationData.participants)+"äºº",1)])),_:1})])),_:1})])),_:1}),c(y,{class:"confirmation-actions"},{default:o((()=>[c(w,{class:"view-records-btn",onClick:B.goToRecordsFromConfirm},{default:o((()=>[p("æŸ¥çœ‹æˆ‘çš„é¢„çº¦")])),_:1},8,["onClick"]),c(w,{class:"close-confirm-btn",onClick:B.closeConfirmation},{default:o((()=>[p("è¿”å›žæ´»åŠ¨åˆ—è¡¨")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1},8,["onClick"])):h("",!0)])),_:1},8,["style"])}],["__scopeId","data-v-3100ecc6"]]);export{T as default};
