import{S as e}from"./storage.service.Bt6PQ2bo.js";const t=[{id:"exp-1",title:"五色糯米饭制作体验",description:"学习壮族传统五色糯米饭的制作工艺，了解天然植物染色技艺",dishName:"五色糯米饭",difficulty:"中等",date:"2026-02-15",time:"09:00",location:"南宁市青秀区民族大道88号壮乡美食馆",availableSlots:20,image:"/static/food/wuse-nuomifan.jpg"},{id:"exp-2",title:"壮族粽子包制体验",description:"亲手包制壮族特色粽子，体验传统节日美食文化",dishName:"壮族粽子",difficulty:"简单",date:"2026-02-22",time:"14:00",location:"南宁市西乡塘区大学路100号美食体验中心",availableSlots:25,image:"/static/food/zongzi.jpg"},{id:"exp-3",title:"酸嘢腌制工坊",description:"学习壮族传统酸嘢腌制方法，制作属于自己的酸嘢",dishName:"酸嘢",difficulty:"简单",date:"2026-03-01",time:"10:00",location:"南宁市江南区星光大道66号传统工坊",availableSlots:15,image:"/static/food/suanye.jpg"},{id:"exp-4",title:"糍粑制作体验",description:"体验传统糍粑制作过程，感受壮族美食文化魅力",dishName:"糍粑",difficulty:"中等",date:"2026-03-15",time:"15:00",location:"广西民族博物馆美食体验区",availableSlots:18,image:"/static/food/ciba.jpg"}];function o(e){if(!e)return!1;if("pending"!==e.status&&"confirmed"!==e.status)return!1;return(new Date(`${e.experienceDate}T${e.experienceTime}`)-new Date)/36e5>=24}const i={getCookingExperiences:async function(){return t},createFoodBooking:async function(t,o,i){try{const n=(new Date).toISOString(),a={id:Date.now().toString(36)+Math.random().toString(36).substr(2,9),experienceId:t,experienceTitle:o.title,experienceDate:o.date,experienceTime:o.time,experienceLocation:o.location,formData:{name:i.name,phone:i.phone,participants:i.participants||1,remark:i.remark||""},status:"pending",createdAt:n,updatedAt:n};return await e.saveFoodBooking(a),{success:!0,bookingId:a.id,message:"预约成功"}}catch(n){return console.error("Failed to create food booking:",n),{success:!1,message:"预约失败，请重试"}}},cancelFoodBooking:async function(t){try{const i=await e.getFoodBookingById(t);return i?o(i)?(await e.updateFoodBooking(t,{status:"cancelled"}),{success:!0,message:"取消成功"}):{success:!1,message:"距离活动开始不足24小时，无法取消"}:{success:!1,message:"预约记录不存在"}}catch(i){return console.error("Failed to cancel food booking:",i),{success:!1,message:"取消失败，请重试"}}},canCancelFoodBooking:o,getUserFoodBookings:async function(){try{return(await e.getFoodBookings()).sort(((e,t)=>new Date(`${e.experienceDate}T${e.experienceTime}`)-new Date(`${t.experienceDate}T${t.experienceTime}`)))}catch(t){return console.error("Failed to get user food bookings:",t),[]}},getFoodBookingDetail:async function(t){return e.getFoodBookingById(t)},validateFoodBookingForm:function(e){const t=[];return e.name&&e.name.trim()||t.push({field:"name",message:"请输入姓名"}),e.phone&&e.phone.trim()?/^1[3-9]\d{9}$/.test(e.phone)||t.push({field:"phone",message:"请输入正确的手机号码"}):t.push({field:"phone",message:"请输入手机号"}),{valid:0===t.length,errors:t}}};export{i as F};
