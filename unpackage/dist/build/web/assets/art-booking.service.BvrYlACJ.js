import{S as t}from"./storage.service.D1zc2f4B.js";const e=[{id:"festival-1",title:"壮族三月三歌圩节",description:"体验壮族传统歌圩文化，欣赏山歌对唱，参与民俗活动",date:"2026-04-03",time:"09:00",location:"南宁市青秀山风景区",availableSlots:50,image:"/static/festivals/sanyuesan.jpg"},{id:"festival-2",title:"壮锦织造体验工坊",description:"学习壮锦织造技艺，亲手制作壮锦作品，感受非遗魅力",date:"2026-04-15",time:"14:00",location:"广西民族博物馆",availableSlots:20,image:"/static/festivals/zhuangjin.jpg"},{id:"festival-3",title:"铜鼓文化艺术展",description:"观赏壮族铜鼓艺术，了解铜鼓历史文化，体验铜鼓演奏",date:"2026-05-01",time:"10:00",location:"广西壮族自治区博物馆",availableSlots:100,image:"/static/festivals/tonggu.jpg"},{id:"festival-4",title:"壮族服饰文化节",description:"欣赏壮族传统服饰展示，体验民族服装试穿，学习服饰文化",date:"2026-05-20",time:"09:30",location:"南宁国际会展中心",availableSlots:80,image:"/static/festivals/fuzhi.jpg"}];function a(t){if(!t)return!1;if("pending"!==t.status&&"confirmed"!==t.status)return!1;return(new Date(`${t.festivalDate}T${t.festivalTime}`)-new Date)/36e5>=24}const i={getFestivals:async function(){return e},createArtBooking:async function(e,a,i){try{const s=(new Date).toISOString(),n={id:Date.now().toString(36)+Math.random().toString(36).substr(2,9),festivalId:e,festivalTitle:a.title,festivalDate:a.date,festivalTime:a.time,festivalLocation:a.location,formData:{name:i.name,phone:i.phone,participants:i.participants||1,remark:i.remark||""},status:"pending",createdAt:s,updatedAt:s};return await t.saveArtBooking(n),{success:!0,bookingId:n.id,message:"预约成功"}}catch(s){return console.error("Failed to create art booking:",s),{success:!1,message:"预约失败，请重试"}}},cancelArtBooking:async function(e){try{const i=await t.getArtBookingById(e);return i?a(i)?(await t.updateArtBooking(e,{status:"cancelled"}),{success:!0,message:"取消成功"}):{success:!1,message:"距离活动开始不足24小时，无法取消"}:{success:!1,message:"预约记录不存在"}}catch(i){return console.error("Failed to cancel art booking:",i),{success:!1,message:"取消失败，请重试"}}},canCancelArtBooking:a,getUserArtBookings:async function(){try{return(await t.getArtBookings()).sort(((t,e)=>new Date(`${t.festivalDate}T${t.festivalTime}`)-new Date(`${e.festivalDate}T${e.festivalTime}`)))}catch(e){return console.error("Failed to get user art bookings:",e),[]}},getArtBookingDetail:async function(e){return t.getArtBookingById(e)},validateArtBookingForm:function(t){const e=[];return t.name&&t.name.trim()||e.push({field:"name",message:"请输入姓名"}),t.phone&&t.phone.trim()?/^1[3-9]\d{9}$/.test(t.phone)||e.push({field:"phone",message:"请输入正确的手机号码"}):e.push({field:"phone",message:"请输入手机号"}),{valid:0===e.length,errors:e}}};export{i as A};
