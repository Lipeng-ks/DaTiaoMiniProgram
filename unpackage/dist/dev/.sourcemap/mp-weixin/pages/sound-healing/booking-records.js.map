{"version":3,"file":"booking-records.js","sources":["pages/sound-healing/booking-records.vue","../../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvc291bmQtaGVhbGluZy9ib29raW5nLXJlY29yZHMudnVl"],"sourcesContent":["<template>\r\n  <view class=\"booking-records-container\" :style=\"{ paddingTop: navPaddingTop + 'px' }\">\r\n    <custom-nav-bar\r\n      title=\"ÊàëÁöÑÈ¢ÑÁ∫¶\"\r\n      gradient=\"linear-gradient(120deg, #1b5e20 0%, #2e7d32 45%, #43a047 100%)\"\r\n    />\r\n    \r\n    <!-- Âä†ËΩΩÁä∂ÊÄÅ -->\r\n    <view class=\"loading\" v-if=\"loading\">\r\n      <text>Âä†ËΩΩ‰∏≠...</text>\r\n    </view>\r\n    \r\n    <!-- È¢ÑÁ∫¶ËÆ∞ÂΩïÂàóË°® -->\r\n    <view class=\"records-list\" v-else-if=\"bookings.length > 0\">\r\n      <view \r\n        v-for=\"booking in bookings\" \r\n        :key=\"booking.id\"\r\n        class=\"record-card\"\r\n        @click=\"viewDetail(booking.id)\"\r\n      >\r\n        <view class=\"record-header\">\r\n          <text class=\"event-title\">{{ booking.eventTitle }}</text>\r\n          <text class=\"status\" :class=\"getStatusClass(booking.status)\">\r\n            {{ getStatusText(booking.status) }}\r\n          </text>\r\n        </view>\r\n        \r\n        <view class=\"record-info\">\r\n          <view class=\"info-row\">\r\n            <text class=\"info-icon\">üìÖ</text>\r\n            <text class=\"info-text\">{{ booking.eventDate }} {{ booking.eventTime }}</text>\r\n          </view>\r\n          <view class=\"info-row\">\r\n            <text class=\"info-icon\">üìç</text>\r\n            <text class=\"info-text\">{{ booking.eventLocation }}</text>\r\n          </view>\r\n          <view class=\"info-row\">\r\n            <text class=\"info-icon\">üë§</text>\r\n            <text class=\"info-text\">{{ booking.formData.name }} | {{ booking.formData.participants }}‰∫∫</text>\r\n          </view>\r\n        </view>\r\n        \r\n        <view class=\"record-footer\">\r\n          <text class=\"booking-time\">È¢ÑÁ∫¶Êó∂Èó¥Ôºö{{ formatDate(booking.createdAt) }}</text>\r\n          <text class=\"arrow\">‚Ä∫</text>\r\n        </view>\r\n      </view>\r\n    </view>\r\n    \r\n    <!-- Á©∫Áä∂ÊÄÅ -->\r\n    <view class=\"empty-state\" v-else>\r\n      <text class=\"empty-icon\">üìã</text>\r\n      <text class=\"empty-text\">ÊöÇÊó†È¢ÑÁ∫¶ËÆ∞ÂΩï</text>\r\n      <button class=\"go-booking-btn\" @click=\"goToBooking\">ÂéªÈ¢ÑÁ∫¶</button>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport CustomNavBar from '@/components/CustomNavBar.vue'\r\nimport BookingService from '@/services/booking.service.js'\r\n\r\nexport default {\r\n  components: { CustomNavBar },\r\n  data() {\r\n    return {\r\n      navPaddingTop: 100,\r\n      bookings: [],\r\n      loading: true\r\n    }\r\n  },\r\n  onLoad() {\r\n    const info = uni.getSystemInfoSync()\r\n    this.navPaddingTop = (info.statusBarHeight || 20) + 75\r\n  },\r\n  onShow() {\r\n    this.loadBookings()\r\n  },\r\n  methods: {\r\n    async loadBookings() {\r\n      this.loading = true\r\n      try {\r\n        // Get bookings sorted by event date (ascending)\r\n        this.bookings = await BookingService.getUserBookings()\r\n      } catch (error) {\r\n        console.error('Failed to load bookings:', error)\r\n        uni.showToast({\r\n          title: 'Âä†ËΩΩÂ§±Ë¥•',\r\n          icon: 'none'\r\n        })\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n    viewDetail(bookingId) {\r\n      uni.navigateTo({\r\n        url: `/pages/sound-healing/booking-detail?id=${bookingId}`\r\n      })\r\n    },\r\n    goToBooking() {\r\n      uni.navigateTo({\r\n        url: '/pages/sound-healing/offline-booking'\r\n      })\r\n    },\r\n    getStatusClass(status) {\r\n      const classMap = {\r\n        pending: 'status-pending',\r\n        confirmed: 'status-confirmed',\r\n        cancelled: 'status-cancelled',\r\n        completed: 'status-completed'\r\n      }\r\n      return classMap[status] || ''\r\n    },\r\n    getStatusText(status) {\r\n      const textMap = {\r\n        pending: 'ÂæÖÁ°ÆËÆ§',\r\n        confirmed: 'Â∑≤Á°ÆËÆ§',\r\n        cancelled: 'Â∑≤ÂèñÊ∂à',\r\n        completed: 'Â∑≤ÂÆåÊàê'\r\n      }\r\n      return textMap[status] || status\r\n    },\r\n    formatDate(isoString) {\r\n      if (!isoString) return ''\r\n      const date = new Date(isoString)\r\n      const year = date.getFullYear()\r\n      const month = String(date.getMonth() + 1).padStart(2, '0')\r\n      const day = String(date.getDate()).padStart(2, '0')\r\n      const hours = String(date.getHours()).padStart(2, '0')\r\n      const minutes = String(date.getMinutes()).padStart(2, '0')\r\n      return `${year}-${month}-${day} ${hours}:${minutes}`\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.booking-records-container {\r\n  min-height: 100vh;\r\n  background: #f5f5f5;\r\n}\r\n\r\n.header {\r\n  background: linear-gradient(135deg, #1b5e20 0%, #2e7d32 60%, #4caf50 100%);\r\n  padding: 48rpx 40rpx;\r\n  text-align: center;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n.header::before {\r\n  content: '';\r\n  position: absolute;\r\n  top: -50%;\r\n  right: -20%;\r\n  width: 200rpx;\r\n  height: 200rpx;\r\n  background: rgba(255, 255, 255, 0.1);\r\n  border-radius: 50%;\r\n}\r\n\r\n.header::after {\r\n  content: '';\r\n  position: absolute;\r\n  bottom: -30%;\r\n  left: -10%;\r\n  width: 150rpx;\r\n  height: 150rpx;\r\n  background: rgba(255, 255, 255, 0.08);\r\n  border-radius: 50%;\r\n}\r\n\r\n.title {\r\n  font-size: 38rpx;\r\n  font-weight: 700;\r\n  color: #ffffff;\r\n  position: relative;\r\n  z-index: 1;\r\n  letter-spacing: 2rpx;\r\n}\r\n\r\n.loading {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  padding: 100rpx;\r\n  color: #999;\r\n}\r\n\r\n.records-list {\r\n  padding: 20rpx;\r\n}\r\n\r\n.record-card {\r\n  background: #ffffff;\r\n  border-radius: 20rpx;\r\n  padding: 30rpx;\r\n  margin-bottom: 20rpx;\r\n  box-shadow: 0 4rpx 20rpx rgba(0, 0, 0, 0.08);\r\n}\r\n\r\n.record-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.event-title {\r\n  font-size: 32rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n  flex: 1;\r\n  margin-right: 20rpx;\r\n}\r\n\r\n.status {\r\n  font-size: 24rpx;\r\n  padding: 8rpx 20rpx;\r\n  border-radius: 20rpx;\r\n}\r\n\r\n.status-pending {\r\n  background: #fff3e0;\r\n  color: #ff9800;\r\n}\r\n\r\n.status-confirmed {\r\n  background: #e8f5e9;\r\n  color: #4caf50;\r\n}\r\n\r\n.status-cancelled {\r\n  background: #ffebee;\r\n  color: #f44336;\r\n}\r\n\r\n.status-completed {\r\n  background: #e3f2fd;\r\n  color: #2196f3;\r\n}\r\n\r\n.record-info {\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.info-row {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 12rpx;\r\n}\r\n\r\n.info-icon {\r\n  margin-right: 12rpx;\r\n  font-size: 26rpx;\r\n}\r\n\r\n.info-text {\r\n  font-size: 26rpx;\r\n  color: #666;\r\n}\r\n\r\n.record-footer {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding-top: 20rpx;\r\n  border-top: 1rpx solid #eee;\r\n}\r\n\r\n.booking-time {\r\n  font-size: 24rpx;\r\n  color: #999;\r\n}\r\n\r\n.arrow {\r\n  font-size: 32rpx;\r\n  color: #ccc;\r\n}\r\n\r\n.empty-state {\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 200rpx 40rpx;\r\n}\r\n\r\n.empty-icon {\r\n  font-size: 120rpx;\r\n  margin-bottom: 30rpx;\r\n}\r\n\r\n.empty-text {\r\n  font-size: 30rpx;\r\n  color: #999;\r\n  margin-bottom: 40rpx;\r\n}\r\n\r\n.go-booking-btn {\r\n  background: #2e7d32;\r\n  color: #ffffff;\r\n  border-radius: 40rpx;\r\n  font-size: 28rpx;\r\n  padding: 20rpx 60rpx;\r\n}\r\n</style>\r\n","import MiniProgramPage from 'D:/project/Â§ßÊåëÂ∞èÁ®ãÂ∫è/Â§ßÊåëÂ∞èÁ®ãÂ∫è/pages/sound-healing/booking-records.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","BookingService"],"mappings":";;;AA2DA,qBAAqB,MAAW;AAGhC,MAAK,YAAU;AAAA,EACb,YAAY,EAAE,aAAc;AAAA,EAC5B,OAAO;AACL,WAAO;AAAA,MACL,eAAe;AAAA,MACf,UAAU,CAAE;AAAA,MACZ,SAAS;AAAA,IACX;AAAA,EACD;AAAA,EACD,SAAS;AACP,UAAM,OAAOA,cAAG,MAAC,kBAAkB;AACnC,SAAK,iBAAiB,KAAK,mBAAmB,MAAM;AAAA,EACrD;AAAA,EACD,SAAS;AACP,SAAK,aAAa;AAAA,EACnB;AAAA,EACD,SAAS;AAAA,IACP,MAAM,eAAe;AACnB,WAAK,UAAU;AACf,UAAI;AAEF,aAAK,WAAW,MAAMC,yBAAc,eAAC,gBAAgB;AAAA,MACrD,SAAO,OAAO;AACdD,sBAAAA,MAAc,MAAA,SAAA,iDAAA,4BAA4B,KAAK;AAC/CA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,SACP;AAAA,MACH,UAAU;AACR,aAAK,UAAU;AAAA,MACjB;AAAA,IACD;AAAA,IACD,WAAW,WAAW;AACpBA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK,0CAA0C,SAAS;AAAA,OACzD;AAAA,IACF;AAAA,IACD,cAAc;AACZA,oBAAAA,MAAI,WAAW;AAAA,QACb,KAAK;AAAA,OACN;AAAA,IACF;AAAA,IACD,eAAe,QAAQ;AACrB,YAAM,WAAW;AAAA,QACf,SAAS;AAAA,QACT,WAAW;AAAA,QACX,WAAW;AAAA,QACX,WAAW;AAAA,MACb;AACA,aAAO,SAAS,MAAM,KAAK;AAAA,IAC5B;AAAA,IACD,cAAc,QAAQ;AACpB,YAAM,UAAU;AAAA,QACd,SAAS;AAAA,QACT,WAAW;AAAA,QACX,WAAW;AAAA,QACX,WAAW;AAAA,MACb;AACA,aAAO,QAAQ,MAAM,KAAK;AAAA,IAC3B;AAAA,IACD,WAAW,WAAW;AACpB,UAAI,CAAC;AAAW,eAAO;AACvB,YAAM,OAAO,IAAI,KAAK,SAAS;AAC/B,YAAM,OAAO,KAAK,YAAY;AAC9B,YAAM,QAAQ,OAAO,KAAK,SAAQ,IAAK,CAAC,EAAE,SAAS,GAAG,GAAG;AACzD,YAAM,MAAM,OAAO,KAAK,QAAS,CAAA,EAAE,SAAS,GAAG,GAAG;AAClD,YAAM,QAAQ,OAAO,KAAK,SAAU,CAAA,EAAE,SAAS,GAAG,GAAG;AACrD,YAAM,UAAU,OAAO,KAAK,WAAY,CAAA,EAAE,SAAS,GAAG,GAAG;AACzD,aAAO,GAAG,IAAI,IAAI,KAAK,IAAI,GAAG,IAAI,KAAK,IAAI,OAAO;AAAA,IACpD;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpIA,GAAG,WAAW,eAAe;"}